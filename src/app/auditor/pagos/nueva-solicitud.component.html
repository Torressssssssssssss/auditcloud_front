<div class="form-card">
  <h3 class="title">Crear Nueva Solicitud de Pago</h3>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate>

    <div class="field">
      <label for="id_empresa">ID de la Empresa Cliente</label>
      <input id="id_empresa" type="number" formControlName="id_empresa" placeholder="Ej: 99" />
      
      <div class="help">Ingresa el ID de la empresa a la que se le cobrará.</div>
      
      <div *ngIf="form.get('id_empresa')?.touched && form.get('id_empresa')?.invalid" class="error">
        <div *ngIf="form.get('id_empresa')?.errors?.['required']">El ID es obligatorio.</div>
      </div>
    </div>

    <div class="field">
      <label for="concepto">Concepto</label>
      <input id="concepto" type="text" formControlName="concepto" placeholder="Ej: Auditoría Anual 2025" />
      <div *ngIf="form.get('concepto')?.touched && form.get('concepto')?.invalid" class="error">
        <div *ngIf="form.get('concepto')?.errors?.['required']">El concepto es obligatorio.</div>
        <div *ngIf="form.get('concepto')?.errors?.['minlength']">Escribe al menos 5 caracteres.</div>
      </div>
    </div>

    <div class="field">
      <label for="monto">Monto (MXN)</label>
      <input id="monto" type="number" step="0.01" formControlName="monto" placeholder="0.00" />
      <div *ngIf="form.get('monto')?.touched && form.get('monto')?.invalid" class="error">
        <div *ngIf="form.get('monto')?.errors?.['required']">El monto es obligatorio.</div>
        <div *ngIf="form.get('monto')?.errors?.['min']">El monto debe ser mayor que 0.</div>
      </div>
    </div>

    <div class="actions">
      <button type="button" class="btn btn-muted" (click)="cancelar()">Cancelar</button>
      <button type="submit" class="btn btn-primary" [disabled]="form.invalid || enviando()">
        <span *ngIf="enviando()">Creando...</span>
        <span *ngIf="!enviando()">Crear Solicitud</span>
      </button>
    </div>

    <div *ngIf="errorMsg()" class="error global">{{ errorMsg() }}</div>
    <div *ngIf="successMsg()" class="success global">{{ successMsg() }}</div>

  </form>
</div>
