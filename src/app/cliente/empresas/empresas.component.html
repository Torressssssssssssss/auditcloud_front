<div class="empresas-page">
  <div class="page-header">
    <div class="header-content">
      <h2>Empresas Auditoras</h2>
      <p class="subtitle">Encuentra especialistas certificados para tu auditoría</p>
    </div>
  </div>

  @if (loading()) {
    <app-loading-spinner />
  } @else if (empresas().length === 0) {
    <app-empty-state 
      mensaje="No hay empresas auditoras disponibles en este momento." 
      icono="building">
    </app-empty-state>
  } @else {
    <div class="grid-empresas">
      @for (emp of empresas(); track emp.id_empresa) {
        <div class="card-empresa">
          
          <div class="card-header">
            <div class="avatar-logo">
              {{ emp.nombre.charAt(0) }}
            </div>
            <div class="header-text">
              <h3>{{ emp.nombre }}</h3>
              <div class="location">
                <app-icon name="map-pin" [size]="14"></app-icon>
                <span>{{ emp.ciudad || 'México' }}, {{ emp.estado || 'MX' }}</span>
              </div>
            </div>
          </div>

          <div class="card-body">
            <p class="description">Especialistas en cumplimiento ambiental y auditorías certificadas.</p>
            
            <div class="tags-container">
              <span class="tags-label">Especialidades:</span>
              <div class="tags-list">
                @for (modId of emp.modulos; track modId) {
                  <span class="tag">{{ getModuloNombre(modId) }}</span>
                }
              </div>
            </div>
          </div>

          <div class="card-footer">
            <button class="btn-contactar" (click)="contactar(emp)">
              <app-icon name="message-square" [size]="18" class="mr-2"></app-icon>
              Contactar Ahora
            </button>
          </div>

        </div>
      }
    </div>
  }
</div>